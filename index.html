<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>í”„ë¦¬ë¯¸ì—„ ë¡œë˜ ì¶”ì²œê¸°</title>
<meta name="description" content="ë¡œë˜ 6/45 ì¶”ì²œ + 5ì„¸íŠ¸ ìƒì„± + ë³´ë„ˆìŠ¤ + í–‰ìš´ì§€ìˆ˜ + ì €ì¥ + í†µê³„/í™•ë¥  ì•ˆë‚´" />

<style>
  :root{
    --bg1:#667eea;
    --bg2:#764ba2;
    --card:#ffffff;
    --text:#111827;
    --muted:#6b7280;
    --line:#e5e7eb;
    --shadow: 0 30px 80px rgba(0,0,0,.25);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:-apple-system, BlinkMacSystemFont, "Noto Sans KR", system-ui, sans-serif;
    min-height:100vh;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px 14px;
    color:var(--text);
  }

  .card{
    width:980px;
    max-width:100%;
    background:rgba(255,255,255,.92);
    border-radius:24px;
    padding:26px;
    box-shadow: var(--shadow);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,.25);
  }

  header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:14px;
    flex-wrap:wrap;
    margin-bottom:14px;
  }
  h1{
    margin:0;
    font-size:26px;
    letter-spacing:-.2px;
  }
  .sub{
    margin-top:6px;
    color:var(--muted);
    font-size:13px;
    line-height:1.5;
  }

  .controls{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-end;
  }
  button{
    border:none;
    color:white;
    padding:12px 16px;
    font-size:14px;
    border-radius:14px;
    cursor:pointer;
    font-weight:800;
    box-shadow:0 10px 20px rgba(0,0,0,.18);
    transition:.15s ease;
    display:inline-flex;
    align-items:center;
    gap:8px;
    user-select:none;
  }
  button:hover{transform:translateY(-2px)}
  button:active{transform:translateY(1px)}
  .primary{background:linear-gradient(135deg,#ff9966,#ff5e62)}
  .secondary{background:linear-gradient(135deg,#7aa2ff,#45d6b6)}
  .ghost{
    background:rgba(17,24,39,.08);
    color:#111827;
    box-shadow:none;
    border:1px solid rgba(17,24,39,.10);
    font-weight:700;
  }
  .danger{
    background:linear-gradient(135deg,#ff6b6b,#ff3b3b);
  }

  .layout{
    display:grid;
    grid-template-columns: 1.2fr .8fr;
    gap:14px;
    margin-top:10px;
  }

  .panel{
    background:rgba(255,255,255,.9);
    border:1px solid rgba(17,24,39,.10);
    border-radius:18px;
    padding:16px;
  }
  .panel h2{
    margin:0 0 10px;
    font-size:15px;
    letter-spacing:-.1px;
  }
  .muted{color:var(--muted); font-size:13px}
  .row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
  }

  /* ì„¸íŠ¸ ì¹´ë“œ */
  .sets{
    display:grid;
    grid-template-columns: 1fr;
    gap:10px;
  }
  .set{
    border:1px solid rgba(17,24,39,.10);
    background:rgba(255,255,255,.75);
    border-radius:16px;
    padding:12px;
  }
  .setTop{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    flex-wrap:wrap;
    margin-bottom:8px;
  }
  .badge{
    font-size:12px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid rgba(17,24,39,.10);
    background:rgba(17,24,39,.04);
    color:#111827;
    font-weight:700;
  }

  .balls{
    display:flex;
    justify-content:flex-start;
    flex-wrap:wrap;
    gap:10px;
  }

  /* ë¡œë˜ ê³µ */
  .ball{
    width:54px;
    height:54px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:900;
    font-size:18px;
    color:white;
    box-shadow:
      inset -6px -10px 18px rgba(0,0,0,.22),
      inset 6px 8px 18px rgba(255,255,255,.30),
      0 8px 18px rgba(0,0,0,.20);
    transform:scale(0);
    animation:pop .42s forwards;
  }
  .ball.bonus{
    outline: 3px solid rgba(17,24,39,.15);
    position:relative;
  }
  .ball.bonus::after{
    content:"BONUS";
    position:absolute;
    bottom:-16px;
    left:50%;
    transform:translateX(-50%);
    font-size:9px;
    font-weight:900;
    color:rgba(17,24,39,.60);
    letter-spacing:.6px;
  }

  @keyframes pop{
    0%{transform:scale(0)}
    80%{transform:scale(1.15)}
    100%{transform:scale(1)}
  }

  .setText{
    margin-top:10px;
    color:#374151;
    font-weight:800;
    font-size:13px;
    word-break:break-word;
  }

  /* í–‰ìš´ì§€ìˆ˜ */
  .luckWrap{
    display:grid;
    gap:10px;
  }
  .luckCard{
    border:1px solid rgba(17,24,39,.10);
    background:rgba(255,255,255,.75);
    border-radius:16px;
    padding:12px;
  }
  .meter{
    height:12px;
    border-radius:999px;
    background:rgba(17,24,39,.08);
    overflow:hidden;
    margin-top:8px;
  }
  .meter > div{
    height:100%;
    width:0%;
    border-radius:999px;
    background: linear-gradient(90deg,#7aa2ff,#45d6b6,#ff9966);
    transition: width .45s ease;
  }
  .luckLine{
    display:flex;
    justify-content:space-between;
    gap:10px;
    align-items:baseline;
  }
  .luckScore{
    font-size:20px;
    font-weight:1000;
    letter-spacing:-.2px;
  }

  /* ì €ì¥/ê¸°ë¡ */
  .history{
    max-height:340px;
    overflow:auto;
    padding-right:6px;
  }
  .historyItem{
    border:1px solid rgba(17,24,39,.10);
    background:rgba(255,255,255,.75);
    border-radius:14px;
    padding:10px;
    margin-bottom:8px;
  }
  .historyItemTop{
    display:flex;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
    margin-bottom:6px;
  }
  .tinyBtns{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }
  .tiny{
    padding:8px 10px;
    font-size:12px;
    border-radius:12px;
    font-weight:800;
  }

  /* í™•ë¥  ì•ˆë‚´ */
  .note{
    border-top:1px solid rgba(17,24,39,.10);
    margin-top:12px;
    padding-top:12px;
    color:var(--muted);
    font-size:12px;
    line-height:1.55;
  }
  code{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size:12px;
    color:#111827;
    background:rgba(17,24,39,.06);
    padding:2px 6px;
    border-radius:8px;
  }

  .toast{
    position:fixed;
    left:50%; bottom:18px;
    transform:translateX(-50%);
    background: rgba(255,255,255,.95);
    border:1px solid rgba(17,24,39,.10);
    color:#111827;
    padding:10px 12px;
    border-radius:14px;
    font-size:13px;
    opacity:0;
    pointer-events:none;
    transition:.2s ease;
    box-shadow: 0 12px 40px rgba(0,0,0,.25);
  }
  .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px);}

  @media (max-width: 920px){
    .layout{grid-template-columns:1fr}
    .balls{justify-content:flex-start}
    .ball{width:50px;height:50px}
  }
</style>
</head>
<body>

<div class="card">
  <header>
    <div>
      <h1>ğŸ¯ í”„ë¦¬ë¯¸ì—„ ë¡œë˜ ì¶”ì²œê¸°</h1>
      <div class="sub">
        ë²„íŠ¼ í•œ ë²ˆì— <b>ìµœëŒ€ 5ì„¸íŠ¸</b> ìƒì„± Â· <b>ë³´ë„ˆìŠ¤ ë²ˆí˜¸</b> í¬í•¨ Â· <b>í–‰ìš´ì§€ìˆ˜</b> Â· <b>ì €ì¥/ë³µì‚¬</b> Â· <b>í™•ë¥  ì•ˆë‚´</b><br/>
        (ì°¸ê³ ) ë¡œë˜ëŠ” í™•ë¥  ê²Œì„ì´ë‹ˆ ì¬ë¯¸ë¡œë§Œ!
      </div>
    </div>

    <div class="controls">
      <button class="primary" id="btn1">ğŸ² 1ì„¸íŠ¸ ì¶”ì²œ</button>
      <button class="secondary" id="btn5">âœ¨ 5ì„¸íŠ¸ í•œ ë²ˆì—</button>
      <button class="ghost" id="btnCopyAll">ğŸ“‹ ì „ì²´ ë³µì‚¬</button>
      <button class="danger" id="btnClear">ğŸ§¹ ê¸°ë¡ ì§€ìš°ê¸°</button>
    </div>
  </header>

  <div class="layout">
    <!-- ì™¼ìª½: ì¶”ì²œ ê²°ê³¼ -->
    <section class="panel" aria-label="ì¶”ì²œ ê²°ê³¼">
      <div class="row">
        <h2 style="margin:0">ì¶”ì²œ ê²°ê³¼</h2>
        <div class="muted" id="stamp"></div>
      </div>

      <div class="sets" id="sets"></div>

      <div class="note">
        <b>í™•ë¥  ì•ˆë‚´</b><br/>
        ë¡œë˜ 6/45ì˜ ì´ ì¡°í•© ìˆ˜ëŠ” <code>C(45,6)=8,145,060</code> ì…ë‹ˆë‹¤. ì¦‰ 1ë“± í™•ë¥ ì€ ì•½ <code>1 / 8,145,060</code>.<br/>
        5ì„¸íŠ¸ë¥¼ ì‚¬ë©´ â€œë‹¹ì²¨ í™•ë¥ ì´ 5ë°°â€ê°€ ì•„ë‹ˆë¼, ì •í™•íˆëŠ” <code>5 / 8,145,060</code> (ì•½ 0.000061%)ë¡œ <b>ì•„ì£¼ ì¡°ê¸ˆ</b> ì¦ê°€í•©ë‹ˆë‹¤.
      </div>
    </section>

    <!-- ì˜¤ë¥¸ìª½: í–‰ìš´ì§€ìˆ˜ + ê¸°ë¡ -->
    <aside class="panel" aria-label="í–‰ìš´ì§€ìˆ˜ ë° ê¸°ë¡">
      <div class="luckWrap">
        <div class="luckCard">
          <div class="luckLine">
            <div>
              <div style="font-weight:900">ğŸ€ ì˜¤ëŠ˜ì˜ í–‰ìš´ì§€ìˆ˜</div>
              <div class="muted">ì¶”ì²œëœ ë²ˆí˜¸ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ â€œì¬ë¯¸ìš©â€ ì ìˆ˜</div>
            </div>
            <div class="luckScore" id="luckScore">-</div>
          </div>
          <div class="meter" aria-hidden="true"><div id="luckBar"></div></div>
          <div class="muted" style="margin-top:8px" id="luckText">ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>

        <div class="luckCard">
          <div class="row" style="margin-bottom:8px">
            <div style="font-weight:900">ğŸ•˜ ìµœê·¼ ì¶”ì²œ ê¸°ë¡</div>
            <div class="muted" id="histCount"></div>
          </div>

          <div class="history" id="history"></div>
        </div>
      </div>
    </aside>
  </div>
</div>

<div class="toast" id="toast">ë³µì‚¬ ì™„ë£Œ!</div>

<script>
  // ===== ì„¤ì • =====
  const HISTORY_KEY = "lotto_premium_history_v2";
  const MAX_HISTORY = 20;

  // ===== DOM =====
  const $sets = document.getElementById("sets");
  const $stamp = document.getElementById("stamp");
  const $history = document.getElementById("history");
  const $histCount = document.getElementById("histCount");
  const $luckScore = document.getElementById("luckScore");
  const $luckBar = document.getElementById("luckBar");
  const $luckText = document.getElementById("luckText");
  const $toast = document.getElementById("toast");

  // ===== ìœ í‹¸ =====
  function showToast(msg){
    $toast.textContent = msg;
    $toast.classList.add("show");
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> $toast.classList.remove("show"), 1200);
  }

  function formatStamp(d=new Date()){
    const yyyy = d.getFullYear();
    const mm = String(d.getMonth()+1).padStart(2,"0");
    const dd = String(d.getDate()).padStart(2,"0");
    const hh = String(d.getHours()).padStart(2,"0");
    const mi = String(d.getMinutes()).padStart(2,"0");
    return `${yyyy}-${mm}-${dd} ${hh}:${mi}`;
  }

  // ë¡œë˜ ìƒ‰ìƒ(í•œêµ­ ë¡œë˜ í”í•œ ì»¬ëŸ¬ êµ¬ë¶„)
  function getColor(n){
    if(n<=10) return "#fbc400";   // ë…¸ë‘
    if(n<=20) return "#69c8f2";   // íŒŒë‘
    if(n<=30) return "#ff7272";   // ë¹¨ê°•
    if(n<=40) return "#aaaaaa";   // íšŒìƒ‰
    return "#b0d840";            // ì´ˆë¡
  }

  // 6ê°œ + ë³´ë„ˆìŠ¤(ì¤‘ë³µì—†ìŒ)
  function pickSet(){
    const set = new Set();
    while(set.size < 7){
      set.add(Math.floor(Math.random()*45)+1);
    }
    const arr = Array.from(set);
    const main = arr.slice(0,6).sort((a,b)=>a-b);
    const bonus = arr[6];
    // bonusê°€ mainì— í¬í•¨ë  ìˆ˜ ì—†ë„ë¡ set.sizeê°€ 7ì´ë¼ ì•ˆì „
    return { main, bonus };
  }

  function pickMany(count){
    const sets = [];
    for(let i=0;i<count;i++) sets.push(pickSet());
    return sets;
  }

  // ===== ë Œë” =====
  function renderSets(sets){
    $sets.innerHTML = "";

    sets.forEach((s, idx)=>{
      const wrap = document.createElement("div");
      wrap.className = "set";

      const top = document.createElement("div");
      top.className = "setTop";

      const badge = document.createElement("span");
      badge.className = "badge";
      badge.textContent = `SET ${idx+1}`;

      const right = document.createElement("span");
      right.className = "muted";
      right.textContent = `ë³´ë„ˆìŠ¤ í¬í•¨`;

      top.appendChild(badge);
      top.appendChild(right);

      const balls = document.createElement("div");
      balls.className = "balls";

      // main 6ê°œ
      s.main.forEach((n, i)=>{
        const b = document.createElement("div");
        b.className = "ball";
        b.textContent = n;
        b.style.background = getColor(n);
        b.style.animationDelay = (i*0.06) + "s";
        balls.appendChild(b);
      });

      // bonus 1ê°œ
      const bonusBall = document.createElement("div");
      bonusBall.className = "ball bonus";
      bonusBall.textContent = s.bonus;
      bonusBall.style.background = getColor(s.bonus);
      bonusBall.style.animationDelay = (6*0.06) + "s";
      balls.appendChild(bonusBall);

      const text = document.createElement("div");
      text.className = "setText";
      text.textContent = `ì¶”ì²œ: ${s.main.join(", ")}  |  ë³´ë„ˆìŠ¤: ${s.bonus}`;

      wrap.appendChild(top);
      wrap.appendChild(balls);
      wrap.appendChild(text);

      $sets.appendChild(wrap);
    });
  }

  // ===== í–‰ìš´ì§€ìˆ˜(ì¬ë¯¸ìš©) =====
  function calcLuckScore(sets){
    // ì ìˆ˜ ìš”ì†Œ(ì¬ë¯¸ìš©): ë¶„í¬ ë‹¤ì–‘ì„±/ì—°ì†ìˆ˜ ì ë‹¹/í•©ê³„ ì ë‹¹/í™€ì§ ê· í˜•/ìƒ‰ìƒ(êµ¬ê°„) ë¶„í¬
    // ê° ì„¸íŠ¸ë³„ ì ìˆ˜(0~100) ê³„ì‚° í›„ í‰ê· 
    const scores = sets.map(s => scoreOne(s.main, s.bonus));
    const avg = Math.round(scores.reduce((a,b)=>a+b,0) / scores.length);
    return { avg, scores };
  }

  function scoreOne(main, bonus){
    const nums = [...main, bonus];

    // 1) í•©ê³„(ê¶Œì¥ ì¤‘ì•™ ê·¼ì²˜ë¥¼ ì„ í˜¸í•œë‹¤ê³  ê°€ì •): 6ê°œ í•©ê³„ í‰ê· ì€ ëŒ€ëµ 138 ê·¼ì²˜(ëŒ€ì¶©).
    const sum = main.reduce((a,b)=>a+b,0);
    const sumScore = clamp(100 - Math.abs(sum - 138) * 1.2, 0, 100);

    // 2) í™€ì§ ê· í˜•(3:3ì´ ìµœê³ )
    const odds = main.filter(n=>n%2===1).length;
    const even = 6 - odds;
    const balanceScore = (odds===3) ? 100 : (odds===2||odds===4) ? 70 : (odds===1||odds===5) ? 40 : 15;

    // 3) ì—°ì†ìˆ˜(0~1ìŒ ì •ë„ëŠ” OK, ë„ˆë¬´ ë§ìœ¼ë©´ ê°ì )
    const sorted = [...main].sort((a,b)=>a-b);
    let consecutivePairs = 0;
    for(let i=0;i<sorted.length-1;i++){
      if(sorted[i+1] - sorted[i] === 1) consecutivePairs++;
    }
    const consecScore = consecutivePairs===0 ? 90 : consecutivePairs===1 ? 100 : consecutivePairs===2 ? 70 : consecutivePairs===3 ? 35 : 10;

    // 4) êµ¬ê°„ ë¶„í¬(1~10, 11~20, 21~30, 31~40, 41~45) ë‹¤ì–‘í• ìˆ˜ë¡ ê°€ì‚°
    const buckets = [0,0,0,0,0];
    main.forEach(n=>{
      if(n<=10) buckets[0]++; else if(n<=20) buckets[1]++; else if(n<=30) buckets[2]++; else if(n<=40) buckets[3]++; else buckets[4]++;
    });
    const distinct = buckets.filter(x=>x>0).length;
    const distScore = distinct===5 ? 100 : distinct===4 ? 85 : distinct===3 ? 65 : distinct===2 ? 40 : 20;

    // 5) ë³´ë„ˆìŠ¤ê°€ ë©”ì¸ í‰ê·  ê·¼ì²˜ë©´ ì‚´ì§ ê°€ì‚°(ê·¸ëƒ¥ ì¬ë¯¸)
    const mean = sum / 6;
    const bonusScore = clamp(100 - Math.abs(bonus - mean) * 4, 0, 100);

    // ê°€ì¤‘ í‰ê· 
    const total = Math.round(
      sumScore*0.22 +
      balanceScore*0.22 +
      consecScore*0.20 +
      distScore*0.20 +
      bonusScore*0.16
    );
    return clamp(total, 0, 100);
  }

  function luckLabel(score){
    if(score >= 85) return "ì˜¤ëŠ˜ ëŠë‚Œ ì¢‹ë‹¤. ê·¸ëƒ¥ ì¬ë¯¸ë¡œ í•œ ì¥ ë”? ğŸ˜";
    if(score >= 70) return "ê· í˜• ê´œì°®ìŒ. ë¬´ë‚œí•˜ê²Œ ê°€ì ğŸ™‚";
    if(score >= 55) return "í‰ê· ì . ì—¬ëŸ¬ ì„¸íŠ¸ ì¤‘ ê³¨ë¼ ì“°ê¸° ì¶”ì²œ ğŸ™‚";
    if(score >= 40) return "ì¡°ê¸ˆ ì¹˜ìš°ì¹¨. ë‹¤ë¥¸ ì„¸íŠ¸ë„ ê°™ì´ ë³´ì ğŸ§";
    return "íŒ¨í„´ì´ í•œìª½ìœ¼ë¡œ ëª°ë¦¼. ë‹¤ì‹œ í•œ ë²ˆ ëˆŒëŸ¬ë³´ì ğŸ˜…";
  }

  function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

  function renderLuck(sets){
    const { avg } = calcLuckScore(sets);
    $luckScore.textContent = avg;
    $luckBar.style.width = avg + "%";
    $luckText.textContent = luckLabel(avg);
  }

  // ===== ê¸°ë¡ ì €ì¥ =====
  function loadHistory(){
    try{
      const raw = localStorage.getItem(HISTORY_KEY);
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    }catch{
      return [];
    }
  }
  function saveHistory(arr){
    localStorage.setItem(HISTORY_KEY, JSON.stringify(arr.slice(0, MAX_HISTORY)));
  }

  function setsToPlainText(sets){
    // ë³µì‚¬ìš© í…ìŠ¤íŠ¸
    // SET 1: 1,2,3,4,5,6 | B: 7
    return sets.map((s,i)=>`SET ${i+1}: ${s.main.join(", ")} | B: ${s.bonus}`).join("\n");
  }

  function addHistory(sets){
    const item = {
      time: formatStamp(),
      sets
    };
    const hist = loadHistory();
    hist.unshift(item);
    saveHistory(hist);
    renderHistory();
  }

  function renderHistory(){
    const hist = loadHistory();
    $histCount.textContent = hist.length ? `${hist.length}ê°œ ì €ì¥ë¨` : "ì €ì¥ëœ ê¸°ë¡ ì—†ìŒ";
    $history.innerHTML = "";

    if(hist.length === 0){
      const div = document.createElement("div");
      div.className = "muted";
      div.textContent = "ì•„ì§ ì €ì¥ëœ ê¸°ë¡ì´ ì—†ì–´ìš”. ë²ˆí˜¸ë¥¼ ìƒì„±í•´ ë³´ì„¸ìš”.";
      $history.appendChild(div);
      return;
    }

    hist.forEach((h, idx)=>{
      const item = document.createElement("div");
      item.className = "historyItem";

      const top = document.createElement("div");
      top.className = "historyItemTop";

      const left = document.createElement("div");
      left.innerHTML = `<div style="font-weight:900">#${idx+1} Â· ${h.time}</div>
                        <div class="muted">${h.sets.length}ì„¸íŠ¸</div>`;

      const btns = document.createElement("div");
      btns.className = "tinyBtns";

      const b1 = document.createElement("button");
      b1.className = "ghost tiny";
      b1.textContent = "ë¶ˆëŸ¬ì˜¤ê¸°";
      b1.onclick = ()=>{
        window.__currentSets = h.sets;
        renderSets(h.sets);
        renderLuck(h.sets);
        $stamp.textContent = "ìƒì„± ì‹œê°: " + h.time + " (ê¸°ë¡ ë¶ˆëŸ¬ì˜´)";
        showToast("ê¸°ë¡ì„ ë¶ˆëŸ¬ì™”ì–´ìš”.");
      };

      const b2 = document.createElement("button");
      b2.className = "ghost tiny";
      b2.textContent = "ë³µì‚¬";
      b2.onclick = ()=> copyText(setsToPlainText(h.sets));

      btns.appendChild(b1);
      btns.appendChild(b2);

      top.appendChild(left);
      top.appendChild(btns);

      const preview = document.createElement("div");
      preview.className = "muted";
      preview.style.marginTop = "6px";
      preview.style.whiteSpace = "pre-line";
      preview.textContent = setsToPlainText(h.sets);

      item.appendChild(top);
      item.appendChild(preview);
      $history.appendChild(item);
    });
  }

  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      showToast("ë³µì‚¬ ì™„ë£Œ!");
    }catch{
      // fallback
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
      showToast("ë³µì‚¬ ì™„ë£Œ!");
    }
  }

  // ===== ìƒì„± íë¦„ =====
  function generate(count){
    const sets = pickMany(count);
    window.__currentSets = sets;

    renderSets(sets);
    renderLuck(sets);

    const now = formatStamp();
    $stamp.textContent = "ìƒì„± ì‹œê°: " + now;

    addHistory(sets);
  }

  // ===== ì´ë²¤íŠ¸ =====
  document.getElementById("btn1").addEventListener("click", ()=>generate(1));
  document.getElementById("btn5").addEventListener("click", ()=>generate(5));

  document.getElementById("btnCopyAll").addEventListener("click", ()=>{
    const sets = window.__currentSets;
    if(!sets || sets.length===0){
      showToast("ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.");
      return;
    }
    copyText(setsToPlainText(sets));
  });

  document.getElementById("btnClear").addEventListener("click", ()=>{
    localStorage.removeItem(HISTORY_KEY);
    renderHistory();
    showToast("ê¸°ë¡ì„ ì§€ì› ì–´ìš”.");
  });

  // ===== ì´ˆê¸° =====
  renderHistory();
  generate(1);
</script>

</body>
</html>